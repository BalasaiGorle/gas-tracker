{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\OneDrive\\\\\\u753B\\u50CF\\\\Screenshots\\\\balasai\\\\gas-tracker\\\\src\\\\App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { create } from 'zustand';\nimport { ethers } from 'ethers';\nimport { createChart, ColorType } from 'lightweight-charts';\n\n// Zustand Store Definition\n// This store will manage our application's state, including gas prices, ETH/USD,\n// simulation mode, and chart data.\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useGasStore = create(set => ({\n  ethGas: {\n    fast: null,\n    avg: null,\n    slow: null,\n    baseFee: null,\n    priorityFee: null,\n    timestamp: null\n  },\n  polygonGas: {\n    fast: null,\n    avg: null,\n    slow: null,\n    baseFee: null,\n    priorityFee: null,\n    timestamp: null\n  },\n  arbitrumGas: {\n    fast: null,\n    avg: null,\n    slow: null,\n    baseFee: null,\n    priorityFee: null,\n    timestamp: null,\n    l1GasEstimate: null\n  },\n  ethUsdPrice: null,\n  simulationMode: false,\n  transactionValue: 0.01,\n  // Default transaction value in ETH/MATIC\n  simulatedCosts: {\n    eth: null,\n    polygon: null,\n    arbitrum: null\n  },\n  chartData: [],\n  // Stores gas price data for the chart\n  currentChartChain: 'ethereum',\n  // Which chain's gas price to show on the chart\n\n  setEthGas: gas => set({\n    ethGas: gas\n  }),\n  setPolygonGas: gas => set({\n    polygonGas: gas\n  }),\n  setArbitrumGas: gas => set({\n    arbitrumGas: gas\n  }),\n  setEthUsdPrice: price => set({\n    ethUsdPrice: price\n  }),\n  toggleSimulationMode: () => set(state => ({\n    simulationMode: !state.simulationMode\n  })),\n  setTransactionValue: value => set({\n    transactionValue: value\n  }),\n  setSimulatedCosts: costs => set({\n    simulatedCosts: costs\n  }),\n  addChartData: data => set(state => ({\n    chartData: [...state.chartData, data]\n  })),\n  setCurrentChartChain: chain => set({\n    currentChartChain: chain\n  })\n}));\n\n// Constants for RPC URLs and Uniswap V3 Pool\nconst RPC_URLS = {\n  ethereum: 'wss://mainnet.infura.io/ws/v3/YOUR_INFURA_PROJECT_ID',\n  // Replace with your Infura Project ID\n  polygon: 'wss://polygon-mainnet.infura.io/ws/v3/YOUR_INFURA_PROJECT_ID',\n  // Replace with your Infura Project ID\n  arbitrum: 'wss://arbitrum-mainnet.infura.io/ws/v3/YOUR_INFURA_PROJECT_ID' // Replace with your Infura Project ID\n};\n\n// Uniswap V3 ETH/USDC 0.05% pool address on Ethereum Mainnet\nconst UNISWAP_V3_ETH_USDC_POOL = '0x88e6A0c2dDD26FEEb64F039a2c41296FcB3f5640';\n// Uniswap V3 Swap event ABI for parsing logs\nconst UNISWAP_SWAP_EVENT_ABI = [\"event Swap(address indexed sender, address indexed recipient, int256 amount0, int256 amount1, uint160 sqrtPriceX96, uint128 liquidity, int24 tick)\"];\n\n// Helper to calculate ETH/USD from sqrtPriceX96\n// This is a simplified calculation. For precise values, token decimals must be considered.\n// ETH has 18 decimals, USDC has 6 decimals.\n// price = (sqrtPriceX96 / (2**96))**2\n// adjusted_price = price * (10**(decimals_token0 - decimals_token1))\n// For ETH/USDC, token0 is usually USDC (6 decimals), token1 is ETH (18 decimals)\n// So, adjusted_price = price * (10**(6 - 18)) = price * (10**-12)\n// Or, if amount0 is USDC and amount1 is ETH:\n// price_eth_per_usd = (1 / price_usd_per_eth) = (1 / ((sqrtPriceX96 / (2**96))**2)) * (10**(decimals_token1 - decimals_token0))\n// price_eth_per_usd = (1 / ((sqrtPriceX96 / (2**96))**2)) * (10**(18 - 6)) = (1 / ((sqrtPriceX96 / (2**96))**2)) * (10**12)\n// Let's assume amount0 is ETH and amount1 is USDC for simplicity of calculation, or reverse if needed.\n// The actual Uniswap V3 price formula is: price = (sqrtPriceX96 / 2**96)**2.\n// If amount0 is ETH and amount1 is USDC, then price is USDC per ETH.\n// If amount0 is USDC and amount1 is ETH, then price is ETH per USDC.\n// Uniswap V3 pools are canonical, so Token0 < Token1 by address.\n// ETH (WETH) address is usually higher than USDC. So, WETH is Token1, USDC is Token0.\n// Price stored is Token1 per Token0. So, ETH per USDC.\n// Price = (sqrtPriceX96 / 2**96)^2 * (10^decimals0 / 10^decimals1)\n// Price = (sqrtPriceX96 / 2**96)^2 * (10^6 / 10^18) = (sqrtPriceX96 / 2**96)^2 * 10^-12 (ETH per USDC)\n// We want USD per ETH. So, 1 / Price = (2**96 / sqrtPriceX96)^2 * 10^12 (USDC per ETH)\nconst calculateEthUsdPrice = sqrtPriceX96 => {\n  const Q96 = ethers.BigNumber.from(2).pow(96);\n  const priceX96 = ethers.BigNumber.from(sqrtPriceX96);\n\n  // Price in terms of Token1 per Token0 (e.g., WETH per USDC)\n  // For ETH/USDC, Token0 is USDC (6 decimals), Token1 is WETH (18 decimals)\n  // So price is WETH/USDC. We want USDC/WETH (USD/ETH).\n  // The inverse price: (Q96 / priceX96)^2\n  // Adjusted for decimals: (Q96 / priceX96)^2 * (10^decimals1 / 10^decimals0)\n  // = (Q96 / priceX96)^2 * (10^18 / 10^6) = (Q96 / priceX96)^2 * 10^12\n  // To avoid large numbers and precision issues with BigNumber,\n  // it's often better to work with floats for the final price display after all BigNumber ops.\n\n  // Using BigNumber to preserve precision for intermediate steps\n  // (sqrtPriceX96 / 2**96) -> price_token1_per_token0_sqrt\n  // (2**96 / sqrtPriceX96) -> price_token0_per_token1_sqrt\n  const price_token0_per_token1_sqrt = Q96.mul(ethers.BigNumber.from(10).pow(12)).div(priceX96); // Scale up for precision\n\n  // Square it\n  const price_token0_per_token1 = price_token0_per_token1_sqrt.pow(2);\n\n  // Now, price_token0_per_token1 is in (USDC / 10^12) per (ETH / 10^18)\n  // So, it's (USDC * 10^18) / (ETH * 10^12) = USDC/ETH * 10^6\n  // We need to divide by 10^6 to get true USDC/ETH\n  const ethUsd = parseFloat(ethers.utils.formatUnits(price_token0_per_token1, 12)); // Divide by 10^12 for final price.\n\n  return ethUsd;\n};\n\n// Custom Hook for fetching gas prices\nconst useGasFetcher = (chainName, setGas, addChartData, currentChartChain) => {\n  _s();\n  const providerRef = useRef(null);\n  const intervalRef = useRef(null);\n  const fetchGas = useCallback(async () => {\n    if (!providerRef.current) return;\n    try {\n      // Fetch current block for baseFeePerGas\n      const block = await providerRef.current.getBlock('latest');\n      const baseFeePerGas = block.baseFeePerGas;\n\n      // Estimate maxPriorityFeePerGas\n      // For EIP-1559, a common heuristic is to use a small fixed value (e.g., 1-2 Gwei)\n      // or use provider.getFeeData() if available and reliable.\n      let maxPriorityFeePerGas;\n      try {\n        const feeData = await providerRef.current.getFeeData();\n        maxPriorityFeePerGas = feeData.maxPriorityFeePerGas;\n      } catch (error) {\n        console.warn(`Could not get fee data for ${chainName}, estimating priority fee.`, error);\n        // Fallback to a common default if getFeeData fails or is not supported\n        maxPriorityFeePerGas = ethers.utils.parseUnits(\"1.5\", \"gwei\"); // 1.5 Gwei default\n      }\n\n      // Calculate \"fast\", \"average\", \"slow\" based on baseFee and priorityFee\n      // These are heuristics; real networks use more complex algorithms.\n      const fastGas = baseFeePerGas.add(maxPriorityFeePerGas.mul(2)); // Higher priority\n      const avgGas = baseFeePerGas.add(maxPriorityFeePerGas);\n      const slowGas = baseFeePerGas.add(maxPriorityFeePerGas.div(2)); // Lower priority\n\n      let l1GasEstimate = null;\n      if (chainName === 'arbitrum') {\n        // Arbitrum L1 gas estimation is complex and typically involves:\n        // 1. Getting L1 gas price from Ethereum.\n        // 2. Estimating calldata size for the Arbitrum transaction.\n        // 3. Using Arbitrum's L1 gas fee formula (which can change).\n        // For this simulation, we'll provide a placeholder or a simplified fixed value.\n        // A real implementation would query Arbitrum's specific RPC methods or SDKs.\n        // Example: `const l1Fee = await arbitrumProvider.getL1GasFee(tx);` (hypothetical)\n        l1GasEstimate = ethers.utils.parseUnits(\"0.00001\", \"ether\"); // Placeholder: 0.00001 ETH\n      }\n      const now = Date.now();\n      const gasData = {\n        fast: parseFloat(ethers.utils.formatUnits(fastGas, \"gwei\")).toFixed(2),\n        avg: parseFloat(ethers.utils.formatUnits(avgGas, \"gwei\")).toFixed(2),\n        slow: parseFloat(ethers.utils.formatUnits(slowGas, \"gwei\")).toFixed(2),\n        baseFee: parseFloat(ethers.utils.formatUnits(baseFeePerGas, \"gwei\")).toFixed(2),\n        priorityFee: parseFloat(ethers.utils.formatUnits(maxPriorityFeePerGas, \"gwei\")).toFixed(2),\n        timestamp: now,\n        l1GasEstimate: l1GasEstimate ? parseFloat(ethers.utils.formatEther(l1GasEstimate)).toFixed(5) : null\n      };\n      setGas(gasData);\n\n      // Add data to chart if this is the currently selected chain for the chart\n      if (currentChartChain === chainName) {\n        addChartData({\n          time: now / 1000,\n          value: parseFloat(gasData.avg)\n        }); // Using avg gas for simplicity\n      }\n    } catch (error) {\n      console.error(`Error fetching gas for ${chainName}:`, error);\n    }\n  }, [chainName, setGas, addChartData, currentChartChain]);\n  useEffect(() => {\n    if (!RPC_URLS[chainName] || RPC_URLS[chainName].includes('YOUR_INFURA_PROJECT_ID')) {\n      console.error(`Please replace 'YOUR_INFURA_PROJECT_ID' in RPC_URLS for ${chainName}.`);\n      return;\n    }\n    try {\n      // Initialize WebSocketProvider\n      providerRef.current = new ethers.providers.WebSocketProvider(RPC_URLS[chainName]);\n      console.log(`Connected to ${chainName} WebSocket.`);\n\n      // Fetch gas immediately and then every 6 seconds\n      fetchGas();\n      intervalRef.current = setInterval(fetchGas, 6000); // Update every 6 seconds\n\n      return () => {\n        // Cleanup on unmount\n        if (intervalRef.current) clearInterval(intervalRef.current);\n        if (providerRef.current) {\n          providerRef.current.destroy(); // Close WebSocket connection\n          console.log(`Disconnected from ${chainName} WebSocket.`);\n        }\n      };\n    } catch (error) {\n      console.error(`Failed to connect to ${chainName} WebSocket:`, error);\n    }\n  }, [chainName, fetchGas]);\n};\n\n// Custom Hook for fetching ETH/USD price from Uniswap V3 logs\n_s(useGasFetcher, \"rAdJuyTYPGo6vv2afotKj+ydvgo=\");\nconst useEthUsdPriceFetcher = setEthUsdPrice => {\n  _s2();\n  const providerRef = useRef(null);\n  const intervalRef = useRef(null);\n  const fetchPrice = useCallback(async () => {\n    if (!providerRef.current) return;\n    try {\n      // Get the latest block number\n      const latestBlockNumber = await providerRef.current.getBlockNumber();\n\n      // Fetch logs for the last few blocks (e.g., 5 blocks) to find a recent Swap event\n      const filter = {\n        address: UNISWAP_V3_ETH_USDC_POOL,\n        topics: [ethers.utils.id(\"Swap(address,address,int256,int256,uint160,uint128,int24)\")],\n        fromBlock: latestBlockNumber - 5,\n        // Look back 5 blocks\n        toBlock: latestBlockNumber\n      };\n      const logs = await providerRef.current.getLogs(filter);\n      if (logs.length > 0) {\n        // Parse the most recent Swap event\n        const iface = new ethers.utils.Interface(UNISWAP_SWAP_EVENT_ABI);\n        const parsedLog = iface.parseLog(logs[logs.length - 1]); // Get the latest log\n\n        const sqrtPriceX96 = parsedLog.args.sqrtPriceX96;\n        const ethUsd = calculateEthUsdPrice(sqrtPriceX96);\n        setEthUsdPrice(ethUsd);\n      } else {\n        console.warn(\"No recent Uniswap V3 Swap events found for ETH/USDC pool.\");\n      }\n    } catch (error) {\n      console.error(\"Error fetching ETH/USD price:\", error);\n    }\n  }, [setEthUsdPrice]);\n  useEffect(() => {\n    // Use a standard JsonRpcProvider for getLogs, as WebSocketProvider might not expose getLogs or have rate limits\n    if (RPC_URLS.ethereum.includes('YOUR_INFURA_PROJECT_ID')) {\n      console.error(`Please replace 'YOUR_INFURA_PROJECT_ID' in RPC_URLS for ethereum to fetch ETH/USD price.`);\n      return;\n    }\n    providerRef.current = new ethers.providers.JsonRpcProvider(RPC_URLS.ethereum.replace('wss://', 'https://'));\n    console.log(\"Initialized ETH/USD price fetcher.\");\n    fetchPrice();\n    intervalRef.current = setInterval(fetchPrice, 15000); // Fetch every 15 seconds\n\n    return () => {\n      if (intervalRef.current) clearInterval(intervalRef.current);\n      // JsonRpcProvider doesn't need explicit destroy\n    };\n  }, [fetchPrice]);\n};\n\n// Component for displaying gas prices\n_s2(useEthUsdPriceFetcher, \"25V9+EGWGHQyDcJYdQlFzlZN3UM=\");\nconst GasPriceCard = ({\n  chainName,\n  gasData,\n  ethUsdPrice,\n  l1GasEstimate\n}) => {\n  _s3();\n  const {\n    simulationMode,\n    transactionValue,\n    simulatedCosts\n  } = useGasStore();\n  const getGasCostUsd = gweiPrice => {\n    if (!gweiPrice || !ethUsdPrice) return 'N/A';\n    // Assuming a default gas limit for a simple transaction (e.g., 21000 for ETH transfer)\n    // For more complex transactions, gas limit varies.\n    const gasLimit = 210000; // A higher gas limit for complex interactions (e.g., Uniswap swap)\n    const gasCostEth = parseFloat(gweiPrice) * gasLimit / 1000000000; // Gwei to ETH\n    let totalEthCost = gasCostEth;\n    if (chainName === 'arbitrum' && l1GasEstimate) {\n      totalEthCost += parseFloat(l1GasEstimate); // Add L1 gas estimate for Arbitrum\n    }\n    return (totalEthCost * ethUsdPrice).toFixed(4);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-gray-800 p-6 rounded-lg shadow-lg text-white flex-1 min-w-[280px]\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-xl font-semibold mb-4 capitalize\",\n      children: [chainName, \" Gas\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 13\n    }, this), gasData.timestamp ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-gray-400 mb-2\",\n        children: [\"Last Updated: \", new Date(gasData.timestamp).toLocaleTimeString()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-2 gap-2 text-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Base Fee:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-mono\",\n          children: [gasData.baseFee, \" Gwei\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 41\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Priority Fee:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-mono\",\n          children: [gasData.priorityFee, \" Gwei\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 45\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Slow:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-mono\",\n          children: [gasData.slow, \" Gwei\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 37\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Average:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-mono\",\n          children: [gasData.avg, \" Gwei\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 40\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Fast:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-mono\",\n          children: [gasData.fast, \" Gwei\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 37\n        }, this), chainName === 'arbitrum' && l1GasEstimate && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"L1 Gas Est.:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"font-mono\",\n            children: [l1GasEstimate, \" ETH\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 52\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 21\n      }, this), simulationMode && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 pt-4 border-t border-gray-700\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-md font-medium mb-2\",\n          children: \"Simulated Cost (Avg Gas)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-lg font-bold text-green-400\",\n          children: [\"$\", simulatedCosts[chainName] !== null ? simulatedCosts[chainName].toFixed(4) : 'Calculating...']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xs text-gray-400 mt-1\",\n          children: [\"(Transaction Value: \", transactionValue, \" \", chainName === 'ethereum' ? 'ETH' : 'MATIC', \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-400\",\n      children: [\"Connecting to \", chainName, \"...\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 266,\n    columnNumber: 9\n  }, this);\n};\n\n// Candlestick Chart Component\n_s3(GasPriceCard, \"R8Y1kubf/F8MvzjohrJrsDbSVNE=\", false, function () {\n  return [useGasStore];\n});\n_c = GasPriceCard;\nconst GasPriceChart = ({\n  data,\n  chainName\n}) => {\n  _s4();\n  const chartContainerRef = useRef();\n  const chartRef = useRef(null); // Store chart instance\n  const seriesRef = useRef(null); // Store series instance\n\n  useEffect(() => {\n    if (!chartContainerRef.current) return;\n\n    // Cleanup existing chart if it exists\n    if (chartRef.current) {\n      chartRef.current.remove();\n      chartRef.current = null;\n      seriesRef.current = null;\n    }\n\n    // Create new chart\n    chartRef.current = createChart(chartContainerRef.current, {\n      width: chartContainerRef.current.clientWidth,\n      height: 300,\n      layout: {\n        backgroundColor: ColorType.Solid,\n        background: {\n          type: ColorType.Solid,\n          color: '#1f2937'\n        },\n        // Tailwind gray-800\n        textColor: '#d1d5db' // Tailwind gray-400\n      },\n      grid: {\n        vertLines: {\n          color: '#374151'\n        },\n        // Tailwind gray-700\n        horzLines: {\n          color: '#374151'\n        } // Tailwind gray-700\n      },\n      rightPriceScale: {\n        borderColor: '#4b5563' // Tailwind gray-600\n      },\n      timeScale: {\n        borderColor: '#4b5563',\n        // Tailwind gray-600\n        timeVisible: true,\n        secondsVisible: false\n      },\n      crosshair: {\n        mode: 0 // Normal mode\n      },\n      watermark: {\n        visible: true,\n        fontSize: 24,\n        horzAlign: 'center',\n        vertAlign: 'center',\n        color: 'rgba(255, 255, 255, 0.1)',\n        text: `${chainName.toUpperCase()} Gas Price (Gwei)`\n      }\n    });\n\n    // Add a line series for gas price\n    seriesRef.current = chartRef.current.addLineSeries({\n      color: '#60a5fa',\n      // Tailwind blue-400\n      lineWidth: 2,\n      priceFormat: {\n        type: 'price',\n        precision: 2,\n        minMove: 0.01\n      }\n    });\n\n    // Set initial data\n    seriesRef.current.setData(data);\n\n    // Handle resize\n    const handleResize = () => {\n      if (chartRef.current && chartContainerRef.current) {\n        chartRef.current.applyOptions({\n          width: chartContainerRef.current.clientWidth\n        });\n      }\n    };\n    window.addEventListener('resize', handleResize);\n    return () => {\n      window.removeEventListener('resize', handleResize);\n      if (chartRef.current) {\n        chartRef.current.remove();\n      }\n    };\n  }, [chainName, data]); // Re-create chart if chainName or initial data changes\n\n  // Update chart data when 'data' prop changes\n  useEffect(() => {\n    if (seriesRef.current) {\n      seriesRef.current.setData(data);\n    }\n  }, [data]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-gray-800 p-6 rounded-lg shadow-lg mt-8\",\n    ref: chartContainerRef,\n    children: /*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-xl font-semibold text-white mb-4 capitalize\",\n      children: [chainName, \" Gas Price Volatility\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 392,\n    columnNumber: 9\n  }, this);\n};\n\n// Main App Component\n_s4(GasPriceChart, \"ImyjEbaYv8MURJd0mtw+FDP2AOc=\");\n_c2 = GasPriceChart;\nconst App = () => {\n  _s5();\n  const {\n    ethGas,\n    polygonGas,\n    arbitrumGas,\n    ethUsdPrice,\n    simulationMode,\n    transactionValue,\n    simulatedCosts,\n    setEthGas,\n    setPolygonGas,\n    setArbitrumGas,\n    setEthUsdPrice,\n    toggleSimulationMode,\n    setTransactionValue,\n    setSimulatedCosts,\n    chartData,\n    addChartData,\n    currentChartChain,\n    setCurrentChartChain\n  } = useGasStore();\n\n  // Fetch gas prices for each chain\n  useGasFetcher('ethereum', setEthGas, addChartData, currentChartChain);\n  useGasFetcher('polygon', setPolygonGas, addChartData, currentChartChain);\n  useGasFetcher('arbitrum', setArbitrumGas, addChartData, currentChartChain);\n\n  // Fetch ETH/USD price\n  useEthUsdPriceFetcher(setEthUsdPrice);\n\n  // Effect to calculate simulated costs when relevant state changes\n  useEffect(() => {\n    if (simulationMode && ethUsdPrice !== null) {\n      // Assuming a default gas limit for simulation\n      // In a real app, this would be estimated per transaction type\n      const gasLimit = 210000; // Example gas limit for a complex transaction\n\n      const calculateCost = (gasData, isArbitrum = false) => {\n        if (!gasData || gasData.avg === null) return null;\n        const avgGwei = parseFloat(gasData.avg);\n        let gasCostEth = avgGwei * gasLimit / 1000000000; // Gwei to ETH\n\n        if (isArbitrum && gasData.l1GasEstimate) {\n          gasCostEth += parseFloat(gasData.l1GasEstimate); // Add L1 gas estimate\n        }\n        const txValueInEth = transactionValue; // User input is already in ETH/MATIC\n        return txValueInEth * ethUsdPrice + gasCostEth * ethUsdPrice;\n      };\n      setSimulatedCosts({\n        eth: calculateCost(ethGas),\n        polygon: calculateCost(polygonGas),\n        arbitrum: calculateCost(arbitrumGas, true)\n      });\n    }\n  }, [simulationMode, transactionValue, ethUsdPrice, ethGas, polygonGas, arbitrumGas, setSimulatedCosts]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-900 text-gray-100 p-8 font-inter\",\n    children: [/*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n                @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');\n                body { font-family: 'Inter', sans-serif; }\n                .chart-container {\n                    width: 100%;\n                    height: 300px; /* Fixed height for the chart */\n                }\n                `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 448,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-4xl font-bold text-center mb-10 text-blue-400\",\n      children: \"Cross-Chain Gas Price Tracker & Wallet Simulator\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-800 p-6 rounded-lg shadow-lg mb-8 flex items-center justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-xl font-medium\",\n          children: \"ETH/USD Price:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 21\n        }, this), ' ', /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-2xl font-bold text-green-400\",\n          children: ethUsdPrice ? `$${ethUsdPrice.toFixed(2)}` : 'Fetching...'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"simulationToggle\",\n          className: \"text-lg font-medium\",\n          children: \"Simulation Mode:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          id: \"simulationToggle\",\n          className: \"toggle toggle-primary\",\n          checked: simulationMode,\n          onChange: toggleSimulationMode\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 469,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 13\n    }, this), simulationMode && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-800 p-6 rounded-lg shadow-lg mb-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"transactionValue\",\n        className: \"block text-lg font-medium mb-2\",\n        children: \"Simulate Transaction Value (ETH/MATIC):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 483,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        id: \"transactionValue\",\n        className: \"w-full p-3 rounded-md bg-gray-700 border border-gray-600 focus:ring-blue-500 focus:border-blue-500 text-white\",\n        value: transactionValue,\n        onChange: e => setTransactionValue(parseFloat(e.target.value) || 0),\n        step: \"0.01\",\n        min: \"0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 486,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-gray-400 mt-2\",\n        children: \"Enter the value of your transaction (e.g., 0.1 ETH for a swap). This will be converted to USD. Gas costs are added on top.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 495,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 482,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-wrap gap-6 justify-center mb-8\",\n      children: [/*#__PURE__*/_jsxDEV(GasPriceCard, {\n        chainName: \"ethereum\",\n        gasData: ethGas,\n        ethUsdPrice: ethUsdPrice\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 503,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(GasPriceCard, {\n        chainName: \"polygon\",\n        gasData: polygonGas,\n        ethUsdPrice: ethUsdPrice\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 504,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(GasPriceCard, {\n        chainName: \"arbitrum\",\n        gasData: arbitrumGas,\n        ethUsdPrice: ethUsdPrice,\n        l1GasEstimate: arbitrumGas.l1GasEstimate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 505,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 502,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-3xl font-bold text-center mb-6 text-blue-400\",\n      children: \"Gas Price Chart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 508,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center mb-4 space-x-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: `px-6 py-2 rounded-md font-semibold ${currentChartChain === 'ethereum' ? 'bg-blue-600 text-white' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'}`,\n        onClick: () => setCurrentChartChain('ethereum'),\n        children: \"Ethereum\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 510,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `px-6 py-2 rounded-md font-semibold ${currentChartChain === 'polygon' ? 'bg-blue-600 text-white' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'}`,\n        onClick: () => setCurrentChartChain('polygon'),\n        children: \"Polygon\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `px-6 py-2 rounded-md font-semibold ${currentChartChain === 'arbitrum' ? 'bg-blue-600 text-white' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'}`,\n        onClick: () => setCurrentChartChain('arbitrum'),\n        children: \"Arbitrum\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 522,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 509,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(GasPriceChart, {\n      data: chartData,\n      chainName: currentChartChain\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 530,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-12 p-6 bg-gray-800 rounded-lg shadow-lg text-gray-300 text-sm\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl font-semibold text-white mb-4\",\n        children: \"Notes on Implementation:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 533,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"list-disc list-inside space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"**RPC Endpoints:** You MUST replace `YOUR_INFURA_PROJECT_ID` in `RPC_URLS` with your actual Infura project ID for the application to function.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"**Gas Price Estimation:** The \\\"fast\\\", \\\"average\\\", and \\\"slow\\\" gas price estimations are heuristic. Real-world dApps often use more sophisticated algorithms or third-party gas APIs for better accuracy. `maxPriorityFeePerGas` is estimated or fetched via `getFeeData()`.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"**Arbitrum L1 Gas:** Calculating Arbitrum's L1 gas fee is complex. This implementation uses a simplified placeholder `l1GasEstimate`. A full solution would involve querying Arbitrum-specific RPC methods (e.g., `eth_estimateGas` with specific calldata for L1 portion) or using an Arbitrum SDK.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 537,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"**Uniswap V3 Price:** The `calculateEthUsdPrice` function directly parses `sqrtPriceX96` from Uniswap V3 `Swap` events. It performs the necessary scaling for token decimals (USDC=6, WETH=18) to derive the ETH/USD price. It fetches logs for the last 5 blocks to ensure a recent price.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 538,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"**Chart Data:** For simplicity, the `lightweight-charts` displays a line chart of the \\\"Average\\\" gas price. Generating true candlestick data (Open, High, Low, Close) from real-time streaming gas prices would require collecting data points over fixed intervals (e.g., 15 minutes) and then aggregating them.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"**Transaction Value Simulation:** The `transactionValue` input directly represents the value of the asset being transacted (e.g., 0.01 ETH). The simulated cost adds this value (converted to USD) to the estimated gas cost. The `gasLimit` for simulation is a fixed example value (210,000); actual gas limits vary greatly by transaction type.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"**Zustand:** The application uses Zustand for global state management, allowing different components to access and update real-time data and simulation parameters.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 541,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 534,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 532,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 447,\n    columnNumber: 9\n  }, this);\n};\n_s5(App, \"oDp+0u79KeooZS7Jb0AHnbsmLnY=\", false, function () {\n  return [useGasStore, useGasFetcher, useGasFetcher, useGasFetcher, useEthUsdPriceFetcher];\n});\n_c3 = App;\nexport default App;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"GasPriceCard\");\n$RefreshReg$(_c2, \"GasPriceChart\");\n$RefreshReg$(_c3, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","create","ethers","createChart","ColorType","jsxDEV","_jsxDEV","Fragment","_Fragment","useGasStore","set","ethGas","fast","avg","slow","baseFee","priorityFee","timestamp","polygonGas","arbitrumGas","l1GasEstimate","ethUsdPrice","simulationMode","transactionValue","simulatedCosts","eth","polygon","arbitrum","chartData","currentChartChain","setEthGas","gas","setPolygonGas","setArbitrumGas","setEthUsdPrice","price","toggleSimulationMode","state","setTransactionValue","value","setSimulatedCosts","costs","addChartData","data","setCurrentChartChain","chain","RPC_URLS","ethereum","UNISWAP_V3_ETH_USDC_POOL","UNISWAP_SWAP_EVENT_ABI","calculateEthUsdPrice","sqrtPriceX96","Q96","BigNumber","from","pow","priceX96","price_token0_per_token1_sqrt","mul","div","price_token0_per_token1","ethUsd","parseFloat","utils","formatUnits","useGasFetcher","chainName","setGas","_s","providerRef","intervalRef","fetchGas","current","block","getBlock","baseFeePerGas","maxPriorityFeePerGas","feeData","getFeeData","error","console","warn","parseUnits","fastGas","add","avgGas","slowGas","now","Date","gasData","toFixed","formatEther","time","includes","providers","WebSocketProvider","log","setInterval","clearInterval","destroy","useEthUsdPriceFetcher","_s2","fetchPrice","latestBlockNumber","getBlockNumber","filter","address","topics","id","fromBlock","toBlock","logs","getLogs","length","iface","Interface","parsedLog","parseLog","args","JsonRpcProvider","replace","GasPriceCard","_s3","getGasCostUsd","gweiPrice","gasLimit","gasCostEth","totalEthCost","className","children","fileName","_jsxFileName","lineNumber","columnNumber","toLocaleTimeString","_c","GasPriceChart","_s4","chartContainerRef","chartRef","seriesRef","remove","width","clientWidth","height","layout","backgroundColor","Solid","background","type","color","textColor","grid","vertLines","horzLines","rightPriceScale","borderColor","timeScale","timeVisible","secondsVisible","crosshair","mode","watermark","visible","fontSize","horzAlign","vertAlign","text","toUpperCase","addLineSeries","lineWidth","priceFormat","precision","minMove","setData","handleResize","applyOptions","window","addEventListener","removeEventListener","ref","_c2","App","_s5","calculateCost","isArbitrum","avgGwei","txValueInEth","htmlFor","checked","onChange","e","target","step","min","onClick","_c3","$RefreshReg$"],"sources":["C:/Users/DELL/OneDrive/画像/Screenshots/balasai/gas-tracker/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { create } from 'zustand';\r\nimport { ethers } from 'ethers';\r\nimport { createChart, ColorType } from 'lightweight-charts';\r\n\r\n// Zustand Store Definition\r\n// This store will manage our application's state, including gas prices, ETH/USD,\r\n// simulation mode, and chart data.\r\nconst useGasStore = create((set) => ({\r\n    ethGas: { fast: null, avg: null, slow: null, baseFee: null, priorityFee: null, timestamp: null },\r\n    polygonGas: { fast: null, avg: null, slow: null, baseFee: null, priorityFee: null, timestamp: null },\r\n    arbitrumGas: { fast: null, avg: null, slow: null, baseFee: null, priorityFee: null, timestamp: null, l1GasEstimate: null },\r\n    ethUsdPrice: null,\r\n    simulationMode: false,\r\n    transactionValue: 0.01, // Default transaction value in ETH/MATIC\r\n    simulatedCosts: { eth: null, polygon: null, arbitrum: null },\r\n    chartData: [], // Stores gas price data for the chart\r\n    currentChartChain: 'ethereum', // Which chain's gas price to show on the chart\r\n\r\n    setEthGas: (gas) => set({ ethGas: gas }),\r\n    setPolygonGas: (gas) => set({ polygonGas: gas }),\r\n    setArbitrumGas: (gas) => set({ arbitrumGas: gas }),\r\n    setEthUsdPrice: (price) => set({ ethUsdPrice: price }),\r\n    toggleSimulationMode: () => set((state) => ({ simulationMode: !state.simulationMode })),\r\n    setTransactionValue: (value) => set({ transactionValue: value }),\r\n    setSimulatedCosts: (costs) => set({ simulatedCosts: costs }),\r\n    addChartData: (data) => set((state) => ({ chartData: [...state.chartData, data] })),\r\n    setCurrentChartChain: (chain) => set({ currentChartChain: chain }),\r\n}));\r\n\r\n// Constants for RPC URLs and Uniswap V3 Pool\r\nconst RPC_URLS = {\r\n    ethereum: 'wss://mainnet.infura.io/ws/v3/YOUR_INFURA_PROJECT_ID', // Replace with your Infura Project ID\r\n    polygon: 'wss://polygon-mainnet.infura.io/ws/v3/YOUR_INFURA_PROJECT_ID', // Replace with your Infura Project ID\r\n    arbitrum: 'wss://arbitrum-mainnet.infura.io/ws/v3/YOUR_INFURA_PROJECT_ID', // Replace with your Infura Project ID\r\n};\r\n\r\n// Uniswap V3 ETH/USDC 0.05% pool address on Ethereum Mainnet\r\nconst UNISWAP_V3_ETH_USDC_POOL = '0x88e6A0c2dDD26FEEb64F039a2c41296FcB3f5640';\r\n// Uniswap V3 Swap event ABI for parsing logs\r\nconst UNISWAP_SWAP_EVENT_ABI = [\r\n    \"event Swap(address indexed sender, address indexed recipient, int256 amount0, int256 amount1, uint160 sqrtPriceX96, uint128 liquidity, int24 tick)\"\r\n];\r\n\r\n// Helper to calculate ETH/USD from sqrtPriceX96\r\n// This is a simplified calculation. For precise values, token decimals must be considered.\r\n// ETH has 18 decimals, USDC has 6 decimals.\r\n// price = (sqrtPriceX96 / (2**96))**2\r\n// adjusted_price = price * (10**(decimals_token0 - decimals_token1))\r\n// For ETH/USDC, token0 is usually USDC (6 decimals), token1 is ETH (18 decimals)\r\n// So, adjusted_price = price * (10**(6 - 18)) = price * (10**-12)\r\n// Or, if amount0 is USDC and amount1 is ETH:\r\n// price_eth_per_usd = (1 / price_usd_per_eth) = (1 / ((sqrtPriceX96 / (2**96))**2)) * (10**(decimals_token1 - decimals_token0))\r\n// price_eth_per_usd = (1 / ((sqrtPriceX96 / (2**96))**2)) * (10**(18 - 6)) = (1 / ((sqrtPriceX96 / (2**96))**2)) * (10**12)\r\n// Let's assume amount0 is ETH and amount1 is USDC for simplicity of calculation, or reverse if needed.\r\n// The actual Uniswap V3 price formula is: price = (sqrtPriceX96 / 2**96)**2.\r\n// If amount0 is ETH and amount1 is USDC, then price is USDC per ETH.\r\n// If amount0 is USDC and amount1 is ETH, then price is ETH per USDC.\r\n// Uniswap V3 pools are canonical, so Token0 < Token1 by address.\r\n// ETH (WETH) address is usually higher than USDC. So, WETH is Token1, USDC is Token0.\r\n// Price stored is Token1 per Token0. So, ETH per USDC.\r\n// Price = (sqrtPriceX96 / 2**96)^2 * (10^decimals0 / 10^decimals1)\r\n// Price = (sqrtPriceX96 / 2**96)^2 * (10^6 / 10^18) = (sqrtPriceX96 / 2**96)^2 * 10^-12 (ETH per USDC)\r\n// We want USD per ETH. So, 1 / Price = (2**96 / sqrtPriceX96)^2 * 10^12 (USDC per ETH)\r\nconst calculateEthUsdPrice = (sqrtPriceX96) => {\r\n    const Q96 = ethers.BigNumber.from(2).pow(96);\r\n    const priceX96 = ethers.BigNumber.from(sqrtPriceX96);\r\n\r\n    // Price in terms of Token1 per Token0 (e.g., WETH per USDC)\r\n    // For ETH/USDC, Token0 is USDC (6 decimals), Token1 is WETH (18 decimals)\r\n    // So price is WETH/USDC. We want USDC/WETH (USD/ETH).\r\n    // The inverse price: (Q96 / priceX96)^2\r\n    // Adjusted for decimals: (Q96 / priceX96)^2 * (10^decimals1 / 10^decimals0)\r\n    // = (Q96 / priceX96)^2 * (10^18 / 10^6) = (Q96 / priceX96)^2 * 10^12\r\n    // To avoid large numbers and precision issues with BigNumber,\r\n    // it's often better to work with floats for the final price display after all BigNumber ops.\r\n\r\n    // Using BigNumber to preserve precision for intermediate steps\r\n    // (sqrtPriceX96 / 2**96) -> price_token1_per_token0_sqrt\r\n    // (2**96 / sqrtPriceX96) -> price_token0_per_token1_sqrt\r\n    const price_token0_per_token1_sqrt = Q96.mul(ethers.BigNumber.from(10).pow(12)).div(priceX96); // Scale up for precision\r\n\r\n    // Square it\r\n    const price_token0_per_token1 = price_token0_per_token1_sqrt.pow(2);\r\n\r\n    // Now, price_token0_per_token1 is in (USDC / 10^12) per (ETH / 10^18)\r\n    // So, it's (USDC * 10^18) / (ETH * 10^12) = USDC/ETH * 10^6\r\n    // We need to divide by 10^6 to get true USDC/ETH\r\n    const ethUsd = parseFloat(ethers.utils.formatUnits(price_token0_per_token1, 12)); // Divide by 10^12 for final price.\r\n\r\n    return ethUsd;\r\n};\r\n\r\n\r\n// Custom Hook for fetching gas prices\r\nconst useGasFetcher = (chainName, setGas, addChartData, currentChartChain) => {\r\n    const providerRef = useRef(null);\r\n    const intervalRef = useRef(null);\r\n\r\n    const fetchGas = useCallback(async () => {\r\n        if (!providerRef.current) return;\r\n\r\n        try {\r\n            // Fetch current block for baseFeePerGas\r\n            const block = await providerRef.current.getBlock('latest');\r\n            const baseFeePerGas = block.baseFeePerGas;\r\n\r\n            // Estimate maxPriorityFeePerGas\r\n            // For EIP-1559, a common heuristic is to use a small fixed value (e.g., 1-2 Gwei)\r\n            // or use provider.getFeeData() if available and reliable.\r\n            let maxPriorityFeePerGas;\r\n            try {\r\n                const feeData = await providerRef.current.getFeeData();\r\n                maxPriorityFeePerGas = feeData.maxPriorityFeePerGas;\r\n            } catch (error) {\r\n                console.warn(`Could not get fee data for ${chainName}, estimating priority fee.`, error);\r\n                // Fallback to a common default if getFeeData fails or is not supported\r\n                maxPriorityFeePerGas = ethers.utils.parseUnits(\"1.5\", \"gwei\"); // 1.5 Gwei default\r\n            }\r\n\r\n            // Calculate \"fast\", \"average\", \"slow\" based on baseFee and priorityFee\r\n            // These are heuristics; real networks use more complex algorithms.\r\n            const fastGas = baseFeePerGas.add(maxPriorityFeePerGas.mul(2)); // Higher priority\r\n            const avgGas = baseFeePerGas.add(maxPriorityFeePerGas);\r\n            const slowGas = baseFeePerGas.add(maxPriorityFeePerGas.div(2)); // Lower priority\r\n\r\n            let l1GasEstimate = null;\r\n            if (chainName === 'arbitrum') {\r\n                // Arbitrum L1 gas estimation is complex and typically involves:\r\n                // 1. Getting L1 gas price from Ethereum.\r\n                // 2. Estimating calldata size for the Arbitrum transaction.\r\n                // 3. Using Arbitrum's L1 gas fee formula (which can change).\r\n                // For this simulation, we'll provide a placeholder or a simplified fixed value.\r\n                // A real implementation would query Arbitrum's specific RPC methods or SDKs.\r\n                // Example: `const l1Fee = await arbitrumProvider.getL1GasFee(tx);` (hypothetical)\r\n                l1GasEstimate = ethers.utils.parseUnits(\"0.00001\", \"ether\"); // Placeholder: 0.00001 ETH\r\n            }\r\n\r\n            const now = Date.now();\r\n            const gasData = {\r\n                fast: parseFloat(ethers.utils.formatUnits(fastGas, \"gwei\")).toFixed(2),\r\n                avg: parseFloat(ethers.utils.formatUnits(avgGas, \"gwei\")).toFixed(2),\r\n                slow: parseFloat(ethers.utils.formatUnits(slowGas, \"gwei\")).toFixed(2),\r\n                baseFee: parseFloat(ethers.utils.formatUnits(baseFeePerGas, \"gwei\")).toFixed(2),\r\n                priorityFee: parseFloat(ethers.utils.formatUnits(maxPriorityFeePerGas, \"gwei\")).toFixed(2),\r\n                timestamp: now,\r\n                l1GasEstimate: l1GasEstimate ? parseFloat(ethers.utils.formatEther(l1GasEstimate)).toFixed(5) : null,\r\n            };\r\n            setGas(gasData);\r\n\r\n            // Add data to chart if this is the currently selected chain for the chart\r\n            if (currentChartChain === chainName) {\r\n                addChartData({ time: now / 1000, value: parseFloat(gasData.avg) }); // Using avg gas for simplicity\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error(`Error fetching gas for ${chainName}:`, error);\r\n        }\r\n    }, [chainName, setGas, addChartData, currentChartChain]);\r\n\r\n    useEffect(() => {\r\n        if (!RPC_URLS[chainName] || RPC_URLS[chainName].includes('YOUR_INFURA_PROJECT_ID')) {\r\n            console.error(`Please replace 'YOUR_INFURA_PROJECT_ID' in RPC_URLS for ${chainName}.`);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            // Initialize WebSocketProvider\r\n            providerRef.current = new ethers.providers.WebSocketProvider(RPC_URLS[chainName]);\r\n            console.log(`Connected to ${chainName} WebSocket.`);\r\n\r\n            // Fetch gas immediately and then every 6 seconds\r\n            fetchGas();\r\n            intervalRef.current = setInterval(fetchGas, 6000); // Update every 6 seconds\r\n\r\n            return () => {\r\n                // Cleanup on unmount\r\n                if (intervalRef.current) clearInterval(intervalRef.current);\r\n                if (providerRef.current) {\r\n                    providerRef.current.destroy(); // Close WebSocket connection\r\n                    console.log(`Disconnected from ${chainName} WebSocket.`);\r\n                }\r\n            };\r\n        } catch (error) {\r\n            console.error(`Failed to connect to ${chainName} WebSocket:`, error);\r\n        }\r\n    }, [chainName, fetchGas]);\r\n};\r\n\r\n// Custom Hook for fetching ETH/USD price from Uniswap V3 logs\r\nconst useEthUsdPriceFetcher = (setEthUsdPrice) => {\r\n    const providerRef = useRef(null);\r\n    const intervalRef = useRef(null);\r\n\r\n    const fetchPrice = useCallback(async () => {\r\n        if (!providerRef.current) return;\r\n\r\n        try {\r\n            // Get the latest block number\r\n            const latestBlockNumber = await providerRef.current.getBlockNumber();\r\n\r\n            // Fetch logs for the last few blocks (e.g., 5 blocks) to find a recent Swap event\r\n            const filter = {\r\n                address: UNISWAP_V3_ETH_USDC_POOL,\r\n                topics: [ethers.utils.id(\"Swap(address,address,int256,int256,uint160,uint128,int24)\")],\r\n                fromBlock: latestBlockNumber - 5, // Look back 5 blocks\r\n                toBlock: latestBlockNumber,\r\n            };\r\n\r\n            const logs = await providerRef.current.getLogs(filter);\r\n\r\n            if (logs.length > 0) {\r\n                // Parse the most recent Swap event\r\n                const iface = new ethers.utils.Interface(UNISWAP_SWAP_EVENT_ABI);\r\n                const parsedLog = iface.parseLog(logs[logs.length - 1]); // Get the latest log\r\n\r\n                const sqrtPriceX96 = parsedLog.args.sqrtPriceX96;\r\n                const ethUsd = calculateEthUsdPrice(sqrtPriceX96);\r\n                setEthUsdPrice(ethUsd);\r\n            } else {\r\n                console.warn(\"No recent Uniswap V3 Swap events found for ETH/USDC pool.\");\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error fetching ETH/USD price:\", error);\r\n        }\r\n    }, [setEthUsdPrice]);\r\n\r\n    useEffect(() => {\r\n        // Use a standard JsonRpcProvider for getLogs, as WebSocketProvider might not expose getLogs or have rate limits\r\n        if (RPC_URLS.ethereum.includes('YOUR_INFURA_PROJECT_ID')) {\r\n            console.error(`Please replace 'YOUR_INFURA_PROJECT_ID' in RPC_URLS for ethereum to fetch ETH/USD price.`);\r\n            return;\r\n        }\r\n        providerRef.current = new ethers.providers.JsonRpcProvider(RPC_URLS.ethereum.replace('wss://', 'https://'));\r\n        console.log(\"Initialized ETH/USD price fetcher.\");\r\n\r\n        fetchPrice();\r\n        intervalRef.current = setInterval(fetchPrice, 15000); // Fetch every 15 seconds\r\n\r\n        return () => {\r\n            if (intervalRef.current) clearInterval(intervalRef.current);\r\n            // JsonRpcProvider doesn't need explicit destroy\r\n        };\r\n    }, [fetchPrice]);\r\n};\r\n\r\n// Component for displaying gas prices\r\nconst GasPriceCard = ({ chainName, gasData, ethUsdPrice, l1GasEstimate }) => {\r\n    const { simulationMode, transactionValue, simulatedCosts } = useGasStore();\r\n\r\n    const getGasCostUsd = (gweiPrice) => {\r\n        if (!gweiPrice || !ethUsdPrice) return 'N/A';\r\n        // Assuming a default gas limit for a simple transaction (e.g., 21000 for ETH transfer)\r\n        // For more complex transactions, gas limit varies.\r\n        const gasLimit = 210000; // A higher gas limit for complex interactions (e.g., Uniswap swap)\r\n        const gasCostEth = (parseFloat(gweiPrice) * gasLimit) / 1_000_000_000; // Gwei to ETH\r\n        let totalEthCost = gasCostEth;\r\n\r\n        if (chainName === 'arbitrum' && l1GasEstimate) {\r\n            totalEthCost += parseFloat(l1GasEstimate); // Add L1 gas estimate for Arbitrum\r\n        }\r\n        return (totalEthCost * ethUsdPrice).toFixed(4);\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-gray-800 p-6 rounded-lg shadow-lg text-white flex-1 min-w-[280px]\">\r\n            <h3 className=\"text-xl font-semibold mb-4 capitalize\">{chainName} Gas</h3>\r\n            {gasData.timestamp ? (\r\n                <>\r\n                    <p className=\"text-sm text-gray-400 mb-2\">Last Updated: {new Date(gasData.timestamp).toLocaleTimeString()}</p>\r\n                    <div className=\"grid grid-cols-2 gap-2 text-sm\">\r\n                        <p>Base Fee:</p><p className=\"font-mono\">{gasData.baseFee} Gwei</p>\r\n                        <p>Priority Fee:</p><p className=\"font-mono\">{gasData.priorityFee} Gwei</p>\r\n                        <p>Slow:</p><p className=\"font-mono\">{gasData.slow} Gwei</p>\r\n                        <p>Average:</p><p className=\"font-mono\">{gasData.avg} Gwei</p>\r\n                        <p>Fast:</p><p className=\"font-mono\">{gasData.fast} Gwei</p>\r\n                        {chainName === 'arbitrum' && l1GasEstimate && (\r\n                            <>\r\n                                <p>L1 Gas Est.:</p><p className=\"font-mono\">{l1GasEstimate} ETH</p>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                    {simulationMode && (\r\n                        <div className=\"mt-4 pt-4 border-t border-gray-700\">\r\n                            <h4 className=\"text-md font-medium mb-2\">Simulated Cost (Avg Gas)</h4>\r\n                            <p className=\"text-lg font-bold text-green-400\">\r\n                                ${simulatedCosts[chainName] !== null ? simulatedCosts[chainName].toFixed(4) : 'Calculating...'}\r\n                            </p>\r\n                            <p className=\"text-xs text-gray-400 mt-1\">\r\n                                (Transaction Value: {transactionValue} {chainName === 'ethereum' ? 'ETH' : 'MATIC'})\r\n                            </p>\r\n                        </div>\r\n                    )}\r\n                </>\r\n            ) : (\r\n                <p className=\"text-gray-400\">Connecting to {chainName}...</p>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\n// Candlestick Chart Component\r\nconst GasPriceChart = ({ data, chainName }) => {\r\n    const chartContainerRef = useRef();\r\n    const chartRef = useRef(null); // Store chart instance\r\n    const seriesRef = useRef(null); // Store series instance\r\n\r\n    useEffect(() => {\r\n        if (!chartContainerRef.current) return;\r\n\r\n        // Cleanup existing chart if it exists\r\n        if (chartRef.current) {\r\n            chartRef.current.remove();\r\n            chartRef.current = null;\r\n            seriesRef.current = null;\r\n        }\r\n\r\n        // Create new chart\r\n        chartRef.current = createChart(chartContainerRef.current, {\r\n            width: chartContainerRef.current.clientWidth,\r\n            height: 300,\r\n            layout: {\r\n                backgroundColor: ColorType.Solid,\r\n                background: { type: ColorType.Solid, color: '#1f2937' }, // Tailwind gray-800\r\n                textColor: '#d1d5db', // Tailwind gray-400\r\n            },\r\n            grid: {\r\n                vertLines: { color: '#374151' }, // Tailwind gray-700\r\n                horzLines: { color: '#374151' }, // Tailwind gray-700\r\n            },\r\n            rightPriceScale: {\r\n                borderColor: '#4b5563', // Tailwind gray-600\r\n            },\r\n            timeScale: {\r\n                borderColor: '#4b5563', // Tailwind gray-600\r\n                timeVisible: true,\r\n                secondsVisible: false,\r\n            },\r\n            crosshair: {\r\n                mode: 0, // Normal mode\r\n            },\r\n            watermark: {\r\n                visible: true,\r\n                fontSize: 24,\r\n                horzAlign: 'center',\r\n                vertAlign: 'center',\r\n                color: 'rgba(255, 255, 255, 0.1)',\r\n                text: `${chainName.toUpperCase()} Gas Price (Gwei)`,\r\n            },\r\n        });\r\n\r\n        // Add a line series for gas price\r\n        seriesRef.current = chartRef.current.addLineSeries({\r\n            color: '#60a5fa', // Tailwind blue-400\r\n            lineWidth: 2,\r\n            priceFormat: {\r\n                type: 'price',\r\n                precision: 2,\r\n                minMove: 0.01,\r\n            },\r\n        });\r\n\r\n        // Set initial data\r\n        seriesRef.current.setData(data);\r\n\r\n        // Handle resize\r\n        const handleResize = () => {\r\n            if (chartRef.current && chartContainerRef.current) {\r\n                chartRef.current.applyOptions({\r\n                    width: chartContainerRef.current.clientWidth,\r\n                });\r\n            }\r\n        };\r\n        window.addEventListener('resize', handleResize);\r\n\r\n        return () => {\r\n            window.removeEventListener('resize', handleResize);\r\n            if (chartRef.current) {\r\n                chartRef.current.remove();\r\n            }\r\n        };\r\n    }, [chainName, data]); // Re-create chart if chainName or initial data changes\r\n\r\n    // Update chart data when 'data' prop changes\r\n    useEffect(() => {\r\n        if (seriesRef.current) {\r\n            seriesRef.current.setData(data);\r\n        }\r\n    }, [data]);\r\n\r\n    return (\r\n        <div className=\"bg-gray-800 p-6 rounded-lg shadow-lg mt-8\" ref={chartContainerRef}>\r\n            <h3 className=\"text-xl font-semibold text-white mb-4 capitalize\">{chainName} Gas Price Volatility</h3>\r\n            {/* Chart will render inside ref={chartContainerRef} */}\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\n// Main App Component\r\nconst App = () => {\r\n    const {\r\n        ethGas, polygonGas, arbitrumGas, ethUsdPrice,\r\n        simulationMode, transactionValue, simulatedCosts,\r\n        setEthGas, setPolygonGas, setArbitrumGas, setEthUsdPrice,\r\n        toggleSimulationMode, setTransactionValue, setSimulatedCosts,\r\n        chartData, addChartData, currentChartChain, setCurrentChartChain\r\n    } = useGasStore();\r\n\r\n    // Fetch gas prices for each chain\r\n    useGasFetcher('ethereum', setEthGas, addChartData, currentChartChain);\r\n    useGasFetcher('polygon', setPolygonGas, addChartData, currentChartChain);\r\n    useGasFetcher('arbitrum', setArbitrumGas, addChartData, currentChartChain);\r\n\r\n    // Fetch ETH/USD price\r\n    useEthUsdPriceFetcher(setEthUsdPrice);\r\n\r\n    // Effect to calculate simulated costs when relevant state changes\r\n    useEffect(() => {\r\n        if (simulationMode && ethUsdPrice !== null) {\r\n            // Assuming a default gas limit for simulation\r\n            // In a real app, this would be estimated per transaction type\r\n            const gasLimit = 210000; // Example gas limit for a complex transaction\r\n\r\n            const calculateCost = (gasData, isArbitrum = false) => {\r\n                if (!gasData || gasData.avg === null) return null;\r\n                const avgGwei = parseFloat(gasData.avg);\r\n                let gasCostEth = (avgGwei * gasLimit) / 1_000_000_000; // Gwei to ETH\r\n\r\n                if (isArbitrum && gasData.l1GasEstimate) {\r\n                    gasCostEth += parseFloat(gasData.l1GasEstimate); // Add L1 gas estimate\r\n                }\r\n\r\n                const txValueInEth = transactionValue; // User input is already in ETH/MATIC\r\n                return (txValueInEth * ethUsdPrice) + (gasCostEth * ethUsdPrice);\r\n            };\r\n\r\n            setSimulatedCosts({\r\n                eth: calculateCost(ethGas),\r\n                polygon: calculateCost(polygonGas),\r\n                arbitrum: calculateCost(arbitrumGas, true),\r\n            });\r\n        }\r\n    }, [simulationMode, transactionValue, ethUsdPrice, ethGas, polygonGas, arbitrumGas, setSimulatedCosts]);\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-900 text-gray-100 p-8 font-inter\">\r\n            <style>\r\n                {`\r\n                @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');\r\n                body { font-family: 'Inter', sans-serif; }\r\n                .chart-container {\r\n                    width: 100%;\r\n                    height: 300px; /* Fixed height for the chart */\r\n                }\r\n                `}\r\n            </style>\r\n            <h1 className=\"text-4xl font-bold text-center mb-10 text-blue-400\">\r\n                Cross-Chain Gas Price Tracker & Wallet Simulator\r\n            </h1>\r\n\r\n            <div className=\"bg-gray-800 p-6 rounded-lg shadow-lg mb-8 flex items-center justify-between\">\r\n                <div>\r\n                    <span className=\"text-xl font-medium\">ETH/USD Price:</span>{' '}\r\n                    <span className=\"text-2xl font-bold text-green-400\">\r\n                        {ethUsdPrice ? `$${ethUsdPrice.toFixed(2)}` : 'Fetching...'}\r\n                    </span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-4\">\r\n                    <label htmlFor=\"simulationToggle\" className=\"text-lg font-medium\">Simulation Mode:</label>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        id=\"simulationToggle\"\r\n                        className=\"toggle toggle-primary\"\r\n                        checked={simulationMode}\r\n                        onChange={toggleSimulationMode}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {simulationMode && (\r\n                <div className=\"bg-gray-800 p-6 rounded-lg shadow-lg mb-8\">\r\n                    <label htmlFor=\"transactionValue\" className=\"block text-lg font-medium mb-2\">\r\n                        Simulate Transaction Value (ETH/MATIC):\r\n                    </label>\r\n                    <input\r\n                        type=\"number\"\r\n                        id=\"transactionValue\"\r\n                        className=\"w-full p-3 rounded-md bg-gray-700 border border-gray-600 focus:ring-blue-500 focus:border-blue-500 text-white\"\r\n                        value={transactionValue}\r\n                        onChange={(e) => setTransactionValue(parseFloat(e.target.value) || 0)}\r\n                        step=\"0.01\"\r\n                        min=\"0\"\r\n                    />\r\n                    <p className=\"text-sm text-gray-400 mt-2\">\r\n                        Enter the value of your transaction (e.g., 0.1 ETH for a swap). This will be converted to USD.\r\n                        Gas costs are added on top.\r\n                    </p>\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"flex flex-wrap gap-6 justify-center mb-8\">\r\n                <GasPriceCard chainName=\"ethereum\" gasData={ethGas} ethUsdPrice={ethUsdPrice} />\r\n                <GasPriceCard chainName=\"polygon\" gasData={polygonGas} ethUsdPrice={ethUsdPrice} />\r\n                <GasPriceCard chainName=\"arbitrum\" gasData={arbitrumGas} ethUsdPrice={ethUsdPrice} l1GasEstimate={arbitrumGas.l1GasEstimate} />\r\n            </div>\r\n\r\n            <h2 className=\"text-3xl font-bold text-center mb-6 text-blue-400\">Gas Price Chart</h2>\r\n            <div className=\"flex justify-center mb-4 space-x-4\">\r\n                <button\r\n                    className={`px-6 py-2 rounded-md font-semibold ${currentChartChain === 'ethereum' ? 'bg-blue-600 text-white' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'}`}\r\n                    onClick={() => setCurrentChartChain('ethereum')}\r\n                >\r\n                    Ethereum\r\n                </button>\r\n                <button\r\n                    className={`px-6 py-2 rounded-md font-semibold ${currentChartChain === 'polygon' ? 'bg-blue-600 text-white' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'}`}\r\n                    onClick={() => setCurrentChartChain('polygon')}\r\n                >\r\n                    Polygon\r\n                </button>\r\n                <button\r\n                    className={`px-6 py-2 rounded-md font-semibold ${currentChartChain === 'arbitrum' ? 'bg-blue-600 text-white' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'}`}\r\n                    onClick={() => setCurrentChartChain('arbitrum')}\r\n                >\r\n                    Arbitrum\r\n                </button>\r\n            </div>\r\n\r\n            <GasPriceChart data={chartData} chainName={currentChartChain} />\r\n\r\n            <div className=\"mt-12 p-6 bg-gray-800 rounded-lg shadow-lg text-gray-300 text-sm\">\r\n                <h3 className=\"text-xl font-semibold text-white mb-4\">Notes on Implementation:</h3>\r\n                <ul className=\"list-disc list-inside space-y-2\">\r\n                    <li>**RPC Endpoints:** You MUST replace `YOUR_INFURA_PROJECT_ID` in `RPC_URLS` with your actual Infura project ID for the application to function.</li>\r\n                    <li>**Gas Price Estimation:** The \"fast\", \"average\", and \"slow\" gas price estimations are heuristic. Real-world dApps often use more sophisticated algorithms or third-party gas APIs for better accuracy. `maxPriorityFeePerGas` is estimated or fetched via `getFeeData()`.</li>\r\n                    <li>**Arbitrum L1 Gas:** Calculating Arbitrum's L1 gas fee is complex. This implementation uses a simplified placeholder `l1GasEstimate`. A full solution would involve querying Arbitrum-specific RPC methods (e.g., `eth_estimateGas` with specific calldata for L1 portion) or using an Arbitrum SDK.</li>\r\n                    <li>**Uniswap V3 Price:** The `calculateEthUsdPrice` function directly parses `sqrtPriceX96` from Uniswap V3 `Swap` events. It performs the necessary scaling for token decimals (USDC=6, WETH=18) to derive the ETH/USD price. It fetches logs for the last 5 blocks to ensure a recent price.</li>\r\n                    <li>**Chart Data:** For simplicity, the `lightweight-charts` displays a line chart of the \"Average\" gas price. Generating true candlestick data (Open, High, Low, Close) from real-time streaming gas prices would require collecting data points over fixed intervals (e.g., 15 minutes) and then aggregating them.</li>\r\n                    <li>**Transaction Value Simulation:** The `transactionValue` input directly represents the value of the asset being transacted (e.g., 0.01 ETH). The simulated cost adds this value (converted to USD) to the estimated gas cost. The `gasLimit` for simulation is a fixed example value (210,000); actual gas limits vary greatly by transaction type.</li>\r\n                    <li>**Zustand:** The application uses Zustand for global state management, allowing different components to access and update real-time data and simulation parameters.</li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}